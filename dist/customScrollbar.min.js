var CustomScrollbar=function(){function b(a,c,b){var d=this;void 0===c&&(c=!1);"function"===typeof Object.setPrototypeOf&&Object.setPrototypeOf(Object.getPrototypeOf(this),null);var f="onwheel"in HTMLDivElement.prototype?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";this.classes=Object.create(null,{wrapper:{configurable:!0,writable:!1,value:"-wrapper"},main:{configurable:!0,writable:!1,value:"scrollable"},base:{configurable:!0,writable:!1,value:"scrollbar"},track:{configurable:!0,
writable:!1,value:"-track"},thumb:{configurable:!0,writable:!1,value:"-thumb"},enabled:{writable:!1,value:"is-scrolling-enabled"},scrolling:{writable:!1,value:"is-scrolling"},focused:{writable:!1,value:"is-focused"}});this.html=Object.create(null,{parent:{writable:!1,value:a},wrapper:{writable:!1,value:a.querySelector("."+this.classes.main+this.classes.wrapper)}});this.template=Object.assign([{type:"div",attr:{"class":this.classes.base},content:[{type:"div",attr:{"class":this.classes.base+this.classes.track},
content:[{type:"div",attr:{"class":this.classes.base+this.classes.thumb}}]}]}],b||{});this.domTemplate=document.createDocumentFragment();this.inBound=this.drag=!1;this.scroll=Object.create(null,{max:{writable:!0,value:0},min:{writable:!0,value:0},parent:{writable:!1,value:Object.create(null,{height:{writable:!0,value:0}})},wrapper:{writable:!1,value:Object.create(null,{height:{writable:!0,value:0},current:{writable:!0,value:0}})},thumb:{writable:!1,value:Object.create(null,{height:{writable:!0,value:0},
current:{writable:!0,value:0}})},end:{writable:!0,value:!1},start:{writable:!0,value:!1}});this.delta=Object.create(null,{initial:{writable:!0,value:0},current:{writable:!0,value:0},ratio:{writable:!0,value:0}});this.enabled=!1;this.animationSuccess=this.animationTimer=0;this.wheelDeltaMultiplier=this.wheelDelta=void 0;this.cache=Object.create(null,{wheelDelta:{enumerable:!0,writable:!0,value:Object.create(null)},clickDelta:{enumerable:!0,writable:!0,value:Object.create(null)},moveDelta:{enumerable:!0,
writable:!0,value:Object.create(null)}});this.buildTemplate();this.addBindings();this.appendDOM(this.html.parent,this.domTemplate);this.boundElements=Object.create(null,{parent:{writable:!1,value:this.html.parent},window:{writable:!1,value:window},document:{writable:!1,value:document}});this.boundEvents=Object.create(null,{parent:{enumerable:!0,writable:!0,value:Object.create(null,{mouseenter:{enumerable:!0,writable:!1,value:this.handleMouseEnter.bind(this)},mouseleave:{enumerable:!0,writable:!1,
value:this.handleMouseLeave.bind(this)},mousedown:{enumerable:!0,writable:!1,value:this.handlerMouseDown.bind(this)},click:{enumerable:!0,writable:!1,value:this.handlerClick.bind(this)}})},document:{enumerable:!0,writable:!0,value:Object.create(null,{mousemove:{enumerable:!0,writable:!1,value:this.handlerMouseMove.bind(this)},mouseup:{enumerable:!0,writable:!1,value:this.handlerMouseUp.bind(this)},keyup:{enumerable:!0,writable:!1,value:this.handleKeyUp.bind(this)}})},window:{enumerable:!0,writable:!0,
value:Object.create(null,{resize:{enumerable:!0,writable:!1,value:this.handlerResize.bind(this)}})}});this.boundEvents.parent[f]=this.handlerScroll.bind(this);this.cursorStep=50;this.keysmap=Object.create(null,{33:{writable:!1,value:function(){return d.setScroll(-d.scroll.parent.height)}},34:{writable:!1,value:function(){return d.setScroll(d.scroll.parent.height)}},38:{writable:!1,value:function(){return d.setScroll(-d.cursorStep)}},40:{writable:!1,value:function(){return d.setScroll(d.cursorStep)}},
35:{writable:!1,value:function(){return d.scrollBottom()}},36:{writable:!1,value:function(){return d.scrollTop()}}});this.timeouts=Object.create(null,{scroll:{writable:!0,value:null},resize:{writable:!0,value:null}});this.movementType="top";["transform","msTransform"].forEach(function(a){a in d.html.parent.style&&(d.movementType=a)});this.observer=null;this.observerAvailable="function"===typeof MutationObserver;c&&this.observe();this.manageEventListeners("add");this.update()}b.prototype.applyAttrs=
function(a,c){for(var b in c)c.hasOwnProperty(b)&&a.setAttribute(b,c[b]);return a};b.prototype.buildRecursively=function(a,c){var b=this,e=c||this.domTemplate;Array.isArray(a)&&a.forEach(function(a){var c=document.createElement(a.type);a.attr&&b.applyAttrs(c,a.attr);return e.appendChild(b.buildRecursively(a.content,c))});return e};b.prototype.buildTemplate=function(){return this.domTemplate=this.buildRecursively(this.template,this.domTemplate)};b.prototype.addBindings=function(){Object.defineProperties(this.html,
{scrollbar:{writable:!1,value:this.domTemplate.querySelector("."+this.classes.base)},track:{writable:!1,value:this.domTemplate.querySelector("."+this.classes.base+"-track")},thumb:{writable:!1,value:this.domTemplate.querySelector("."+this.classes.base+"-thumb")}});return null};b.prototype.appendDOM=function(a,c){a.appendChild(c);return null};b.prototype.getInnerHeight=function(a){var c=a.clientHeight;a=getComputedStyle(a);var b=a.paddingBottom;return c-parseFloat(a.paddingTop)-parseFloat(b)};b.prototype.paint=
function(a){if(-17<this.animationTimer-a||-64>this.animationSuccess-a)this.setupScrollPosition(),this.animationSuccess=a;this.setupThumbPosition();this.animationTimer=a;return this};b.prototype.requestFrame=function(a){this.cancelFrame();this.animationFrame=requestAnimationFrame(a.bind(this));return this};b.prototype.cancelFrame=function(){cancelAnimationFrame(this.animationFrame);return this};b.prototype.setupScrollHeights=function(){this.scroll.parent.height=this.getInnerHeight(this.html.parent);
this.scroll.wrapper.height=this.getInnerHeight(this.html.wrapper);this.scroll.thumb.height=this.scroll.parent.height>this.scroll.wrapper.height?this.scroll.parent.height:Math.floor(this.scroll.parent.height/this.scroll.wrapper.height*this.scroll.parent.height);this.delta.ratio=this.scroll.wrapper.height/(this.scroll.parent.height+this.scroll.thumb.height);this.html.thumb.style.height=this.scroll.thumb.height+"px";return this};b.prototype.generate_topString=function(a){return"top:"+a+"px"};b.prototype.generate_msTransformString=
function(a){return this.generate_transformString(a)};b.prototype.generate_transformString=function(a){return"translate(0, "+a+"px)"};b.prototype.generateDeltaString=function(a){return this["generate_"+this.movementType+"String"](a)};b.prototype.setupThumbPosition=function(){this.html.thumb.style[this.movementType]=this.generateDeltaString(this.scroll.thumb.current);return this};b.prototype.setupScrollPosition=function(){this.html.wrapper.style[this.movementType]=this.generateDeltaString(this.scroll.wrapper.current);
return this};b.prototype.setupScrollMinMax=function(){this.scroll.min=0;this.scroll.max=this.scroll.parent.height-this.scroll.wrapper.height;return this};b.prototype.setupCalculations=function(){this.setupScrollHeights().setupScrollMinMax();return this};b.prototype.setScroll=function(a,c){var b=this;if(this.enabled){var e=this.scroll.wrapper.current+-1*a,f=void 0,g=void 0;this.scroll.wrapper.current=e;this.scroll.start=!1;this.scroll.end=!1;0<=e&&(this.scroll.wrapper.current=this.scroll.min,this.scroll.start=
!0);0>e&&this.scroll.wrapper.current<=this.scroll.max&&(this.scroll.wrapper.current=this.scroll.max,this.scroll.end=!0);f=this.scroll.wrapper.current/this.scroll.max;g=this.scroll.thumb.height*f;this.scroll.thumb.current=this.scroll.parent.height*f+-1*g;this.requestFrame(function(a){b.paint(a)})}return this};b.prototype.scrollTop=function(){this.setScroll(this.scroll.max);return this};b.prototype.scrollBottom=function(){this.setScroll(-this.scroll.max);return this};b.prototype.scrollTo=function(a){a=
"object"===typeof a?a.offsetTop:a;if(this.scroll.wrapper.current===-a)return this;this.setScroll(a+this.scroll.wrapper.current);return this};b.prototype.handlerScroll=function(a){"undefined"===typeof this.wheelDelta&&(a.wheelDelta?(this.wheelDelta="wheelDelta",this.wheelDeltaMultiplier=1):(this.wheelDelta="deltaY",this.wheelDeltaMultiplier=-32));var c=a[this.wheelDelta]*this.wheelDeltaMultiplier;this.cache.wheelDelta[c]||(this.cache.wheelDelta[c]=-.5*c);c=this.cache.wheelDelta[c];this.enabled&&(0>
c&&!this.scroll.start||0<c&&!this.scroll.end)&&(a.stopPropagation(),a.preventDefault());this.setScroll(c,2);return null};b.prototype.handlerMouseUp=function(a){this.delta.initial=0;this.calcBounderies(a);this.drag=!1;this.html.parent.classList.remove(this.classes.scrolling);return null};b.prototype.handlerMouseMove=function(a){this.calcBounderies(a);this.drag&&this.inBound&&(a.stopPropagation(),a.preventDefault(),this.delta.current=a.clientY-this.delta.initial,this.delta.initial=a.clientY,a=this.delta.current/
(this.scroll.parent.height-this.scroll.thumb.height)*this.scroll.parent.height,a+=(this.delta.ratio-.5)*(this.delta.current||1),this.setScroll(a,1));return null};b.prototype.handlerMouseDown=function(a){a.target===this.html.thumb&&(this.calcBounderies(a),a.stopPropagation(),a.preventDefault(),this.delta.initial=a.clientY,this.drag=!0,this.html.parent.classList.add(this.classes.scrolling));return null};b.prototype.handleMouseLeave=function(a){a.target===this.html.parent&&(this.html.parent.blur(),this.html.parent.classList.remove(this.classes.focused));
return null};b.prototype.handleMouseEnter=function(a){a.target===this.html.parent&&this.html.parent.classList.add(this.classes.focused);return null};b.prototype.handlerClick=function(a){if(a.target===this.html.track){var c=a.offsetY;this.cache.clickDelta[c]||(this.cache.clickDelta[c]=this.scroll.max*a.offsetY/this.scroll.parent.height*-1);this.setScroll(this.scroll.wrapper.current+this.cache.clickDelta[c])}return null};b.prototype.handlerResize=function(a){var c=this;clearTimeout(this.timeouts.resize);
this.timeouts.resize=setTimeout(function(){c.update()},50);return null};b.prototype.handleKeyUp=function(a){if((a.target===this.html.parent||this.html.parent.classList.contains(this.classes.focused))&&"function"===typeof this.keysmap[a.keyCode])this.keysmap[a.keyCode](a);return null};b.prototype.observe=function(){var a=this;this.observerAvailable?(this.observer=new MutationObserver(function(c,b){(c[0].addedNodes.length||c[0].removedNodes.length)&&a.update();return null}),this.observer.observe(this.html.parent,
{childList:!0,subtree:!0})):(this.boundEvents.parent.DOMNodeInserted=this.update.bind(this),this.boundEvents.parent.DOMNodeRemoved=this.update.bind(this));return null};b.prototype.manageEventListeners=function(a){a+="EventListener";for(var c in this.boundEvents)for(var b in this.boundEvents[c])this.boundElements[c][a](b,this.boundEvents[c][b],!0);return this};b.prototype.calcBounderies=function(a){if(this.drag){var b=void 0,b=(((b=document.documentElement)||(b=document.body.parentNode))&&"number"===
typeof b.scrollTop?b:document.body).scrollTop,b=this.html.parent.offsetTop-b,d="c"+a.clientY+"t"+b;this.cache.moveDelta[d]||(this.cache.moveDelta[d]=!(b>a.clientY||b+this.scroll.parent.height<a.clientY));this.inBound=this.cache.moveDelta[d]}return null};b.prototype.clearProps=function(a){return this.cache[a]=Object.create(null)};b.prototype.destroy=function(){this.manageEventListeners("remove");this.observerAvailable&&this.observer&&this.observer.disconnect();this.html.parent.removeChild(this.html.scrollbar);
Object.setPrototypeOf(this,null);for(var a in this)delete this[a];Object.defineProperties(this,{enabled:{writable:!1,value:!1},destroyed:{writable:!1,value:!0}});return null};b.prototype.update=function(){var a=this;this.requestFrame(function(b){a.setupCalculations();a.enabled=a.scroll.wrapper.height>a.scroll.parent.height;b=a.enabled?"add":"remove";Object.keys(a.cache).filter(function(a){return"wheelDelta"!==a}).forEach(a.clearProps.bind(a));a.html.parent.classList[b](a.classes.enabled);a.setScroll(0)});
return this};return b}();